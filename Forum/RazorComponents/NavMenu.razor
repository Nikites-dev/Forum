@using Forum.Services
@using Index = Forum.Pages.Index
@using System.ComponentModel.DataAnnotations
@inject BehaviourService BehaviourService
@inject Interests Interests

<div class="navbar">
    
    <div class="section">
        <p class="txtHeader">FEEDS</p>
        <div class="rowNav">
                <button class="btnNav">
                    <div Match="NavLinkMatch.All">
                        <span><img src="icons/@GetIcon("Home")" width="18"alt="icon"/> </span> Home
                    </div>
            </button>
        </div>
        
        <div class="rowNav">
            <button class="btnNav">
                <div Match="NavLinkMatch.All">
                    <span><img src="icons/@GetIcon("Popular")" width="18"alt="icon"/> </span> Popular
                </div>
            </button>
        </div>
        
        
        @* <div class="rowNav"> *@
        @*     <button class="btnNav"> *@
        @*         <div Match="NavLinkMatch.All"> *@
        @*             <span class="oi oi-star" aria-hidden="true"></span> Popular *@
        @*         </div> *@
        @*     </button> *@
        @* </div> *@
        
        
        
    </div>

    <div class="section">
        
        <p class="txtHeader">TOPICS</p>

        <div class="rowNav">
            <button class="btnNav" @onclick="() => SetInterest(strAll)">
                <div Match="NavLinkMatch.All">
                    <span><img src="icons/@GetIcon("All")" width="18"alt="icon"/> </span> All
                </div>
            </button>
        </div>

        @if (listInterests != null || listInterests.Count != 0)
        {
            @foreach (var interest in listInterests)
            {
                <div class="rowNav">
                    <button class="btnNav" @onclick="() => SetInterest(interest)">
                        <div Match="NavLinkMatch.All">
                            <span><img src="icons/@GetIcon(interest)" width="18"alt="icon"/> </span> @interest
                        </div>
                    </button>
                </div>
            }
        }
    </div>
</div>
 

@code {
    String str = "Finance";
    String strOI = "oi oi-star";
    String strAll = "";
    String crntFilter= "";
    List<String> listInterests = Models.Interests.GetListInterest();
    
    [Parameter]
    public String Filter{ get; set; }

    protected override void OnInitialized()
    {
        listInterests = Models.Interests.GetListInterest();
        Filter = "Funny";
    }
    

    void SetInterest(String nameInterest)
    {
        BehaviourService.OnFilterChange(nameInterest);
       // BehaviourService.SelectInterest = nameInterest;
        //OnTopicSelect.Invoke();
    }

    String GetIcon(String name)
    {
        return name + ".svg";
    }
    public delegate void OnTopicSelectDelegate();

    public event OnTopicSelectDelegate OnTopicSelect;
}